  <!DOCTYPE html>
  <!-- saved from url=(0049)http://datajournalism.ntu.edu.tw/post/89535832028 -->
  <html class="no-js" lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">




  

  <!-- Basic Page Settings -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <!-- Li-Yuan Custom -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./materiel/bootstrap-select.min.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
  <script src="./materiel/bootstrap-select.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="./materiel/group_3.js"></script>
  
  
  <style>
    .svg-liyuan{
      display:inline-block;


  }
    .article_content{
	display:inline-block;
	font-size:20px;
	text-align:left;
	padding:10px;
	}
    .image_ps{
	padding:2px;
	font-size:14px;
	color:#a9a9a9;
	text-align:right;
	}
    .ps{
	font-size:14px;
	color:#a9a9a9;
	}
    .title_text{
	font-size:40px;
	padding:10px;
    }
    .block-title{
      font-weight: bold;
    }
    .container{
      max-width: 100%;
      margin-left: auto;
      margin-right: auto;

    }
    .nav-img{
      display: inline-block;
      width:33%;
      text-align: center;
      border-radius: 25px;
      margin-top:40px;
      margin-bottom:20px;
    }

    body{
      font-family:Microsoft JhengHei,serif,sans-serif,cursive,fantasy,monospace;
    }
    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .bar {
      fill: steelblue;
    }

    .x.axis path {
      display: none;
    }
    .d3-tip {
      line-height: 1;
      font-weight: bold;
      padding: 12px;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      border-radius: 2px;
      z-index: 10000;
    }

    /* Creates a small triangle extender for the tooltip */
    .d3-tip:after {
      box-sizing: border-box;
      display: inline;
      font-size: 10px;
      width: 100%;
      line-height: 1;
      color: rgba(0, 0, 0, 0.8);
      content: "\25BC";
      position: absolute;
      text-align: center;
      z-index: 10000;
    }

    /* Style northward tooltips differently */
    .d3-tip.n:after {
      margin: -1px 0 0 0;
      top: 100%;
      left: 0;
      z-index: 10000;
    }
  </style>
  <script type="text/javascript">
    function drawSvg(filename, id){
    var margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = 450 - margin.left - margin.right,
        height = 200 - margin.top - margin.bottom;

    var x = d3.scale.ordinal()
        .rangeRoundBands([10, width-120], .1);

    var y = d3.scale.linear()
        .rangeRound([height, 0]);

    var color = d3.scale.ordinal()
        .range(["#4FC5C7", "#9FE0F6", "#F3E59A", "#F29C9C"]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left")
        .tickFormat(d3.format(".2s"));

    var tip = d3.tip()
      .attr('class', 'd3-tip')
      .offset([-10, 0])
      .html(function(d) {
        return "<span style='color:red'>" + ((d.y1 - d.y0).toFixed(2)) + "%</span>";
      })

    var svg = d3.select("#"+id)
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    svg.call(tip);

    d3.csv(filename, function(error, data) {
      color.domain(d3.keys(data[0]).filter(function(key) { return key !== "Year"; }));

      color.domain().reverse();
      data.forEach(function(d) {
        var y0 = 0;
        d.ages = color.domain().map(function(name) { return {name: name, y0: y0, y1: y0 += +d[name]}; });
        d.total = d.ages[d.ages.length - 1].y1;
      });
      color.domain().reverse();

      data.sort(function(a, b) { return parseInt(a.Year) - parseInt(b.Year); });

      x.domain(data.map(function(d) { return d.Year; }));
      y.domain([0, d3.max(data, function(d) { return d.total; })]);

      svg.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + height+ ")")
          .call(xAxis)
          .append("text")
          .attr("x", width-50)
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .style("font-size","16px")
          .style("z-index","10000")
          .text("年份");

      svg.append("g")
          .attr("class", "y axis")
          .call(yAxis)
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("x", 0)
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .style("font-size","16px")
          .text("百分比");      

      var year = svg.selectAll(".year")
          .data(data)
        .enter().append("g")
          .attr("class", "g")
          .attr("transform", function(d) { return "translate(" + x(d.Year) + ",0)"; });

      year.selectAll("rect")
          .data(function(d) { return d.ages; })
        .enter().append("rect")
          .attr("width", 40)
          .attr("y", function(d) { return y(d.y1); })
          .attr("transform", "translate(10,0 )")
          .attr("height", function(d) { return y(d.y0) - y(d.y1); })
          .style("fill", function(d) { return color(d.name); })
          .on('mouseover', tip.show)
          .on('mouseout', tip.hide);

      var legend = svg.selectAll(".legend")
          .data(color.domain().slice())
        .enter().append("g")
          .attr("class", "legend")
          .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

      legend.append("rect")
          .attr("x", width -18)
          .attr("width", 18)
          .attr("height", 18)
          .style("fill", color);

      legend.append("text")
          .attr("x", width - 24)
          .attr("y", 9)
          .attr("dy", ".35em")
          .style("text-anchor", "end")
          .text(function(d) { return d; });

    });

  

  }
  	
  function hist_and_pie(divid){
	d3.csv("./materiel/his_data.csv",function(error,his_data){
                                d3.csv("./materiel/pie_data.csv",function(error,pie_data){
                                        var his_1 = [];
                                        var his_2 = [];
                                        var his_3 = [];
                                        var his_4 = [];
                                        var type_list = ["研究所以上","大專院校","高中職","高中職以下學歷"];
                                        var pie_pro_data = [];
					
                                        for(var i = 0;i<his_data.length;i++){
						//alert(pie_data[i].地區);
						
                                                his_1.push([his_data[i].地區,parseFloat(his_data[i].研究所以上)]);
                                                his_2.push([his_data[i].地區,parseFloat(his_data[i].大專院校)]);
                                                his_3.push([his_data[i].地區,parseFloat(his_data[i].高中職)]);
                                                his_4.push([his_data[i].地區,parseFloat(his_data[i].高中職以下學歷)]);
                                                pie_pro_data.push([pie_data[i].地區,parseFloat(pie_data[i].研究所以上),parseFloat(pie_data[i].大專院校),parseFloat(pie_data[i].高中職),parseFloat(pie_data[i].高中職以下學歷)]);
						
                                        }
					pie_pro_data.push([pie_data[his_data.length].地區,parseFloat(pie_data[his_data.length].研究所以上),parseFloat(pie_data[his_data.length].大專院校),parseFloat(pie_data[his_data.length].高中職),parseFloat(pie_data[his_data.length].高中職以下學歷)]);
					var color = d3.scale.ordinal()
        					.range(["#4FC5C7", "#9FE0F6", "#F3E59A", "#F29C9C"]);
                                        his_pro_data = [his_1,his_2,his_3,his_4];
                                        hg = historgram(divid+" #hist",his_1,pie_pro_data,color(0));
                                        pie = piechart(divid+" #pie",pie_pro_data[his_data.length],his_pro_data,type_list);
                                        legend(divid+" #legend",type_list);
					d3.select("#tw_distribution")
						.on("click",function(){
							d3.select("#dis_name")
                                                        .text("全台");
							pie.update(pie_pro_data[his_data.length]);
					});
					
                                })
                        })
	
  }
  
	
  $(document).ready(function(){    
    hist_and_pie("#block-1");
    $('.selectpicker').selectpicker();
    drawSvg("./materiel/全台直轄市長學歷分布.csv", "svg1");
    drawSvg("./materiel/全台直轄市議員學歷分布.csv", "svg2");
    drawSvg("./materiel/全台縣市長學歷分布.csv", "svg3");
    drawSvg("./materiel/全台縣市議員學歷分布.csv", "svg4");
    drawSvg("./materiel/全台鄉鎮市長學歷分布.csv", "svg5");
    

    $( "#selectpicker" )
      .change(function () {
        $( "#blocl-4-image-div>img").hide();
        $("#"+$( "#selectpicker option:selected" ).attr("value")).fadeIn("slow");
      });

    });

    
  </script>
  
  <!-- Li-Yuan Custom -->

</head>



<body>
  <div class="container">
    <img id="banner" style="display:inline-block;position:relative;width:88px;cursor:pointer;left:50px;"src="./materiel/未命名-1.png">
    <h1 style="margin-left:30px;font-weight:bold;position:relative;left:50px;font-size:45px;display:inline-block;">選民就是相信高學歷   學歷高，勝選機會就高</h1>
    <h2 style= "text-align:right;font-size:22px;padding:20px;">李宗岳、譚竹雯、廖昱涵／報導 &nbsp&nbsp&nbsp  洪立遠、吳旻誠／網頁架構</h2>
    <p class="article_content">候選人都想在選舉中獲勝，本報導分析參選人資料，發現選民就是相信高學歷，導致高學歷當選的比例也最高。在台灣五項地方選舉中，行政層級愈高的選舉，當選人學歷多為大專院校、研究所（以上）。可見學歷高低的確影響選民的投票意向。
    </p>
      <div id="block-1" class="block" style="padding-bottom:20px;">
	<div class= "title_text">
        <p>全台學歷分佈一覽</p>
        </div>
        <p class="article_content">
                圖一呈現全台各縣市當選人學歷分布，結果顯示，大專院校（含以上）學歷佔52%，高中職及其以下佔48%。當選人最高學歷為研究所以上者，前三
名依序為台北市、高雄市及新北市；台北市學歷尤其講究，大專院校（含以上）佔近四屆當選人比例93%，甚至沒有高中職以下學歷當選人。
        </p>
        <div id ="hist" class ="diagram" style ="display:inline-block;">
        </div>
        <div id ="pie" class ="diagram" style="display:inline-block;font-size:20px;position:relative;top:-20px;">
            <p id="dis_name" style="font-size:15px;height:15px;">全台</p>
	    <button id="tw_distribution" style="position:absolute;left:200px;top:-10px;background-color:#9FE0F6;">全台分佈</button>
            <div style="font-size:15px;height:15px;">學位分佈</div>
 	    
        </div>
        <div id ="legend" style="display:inline-block;">
        </div>
	<p class="image_ps">
		圖 / 李宗岳 譚竹雯 廖昱涵
	</p>
	<p class="article_content">
		調查時間為近四屆選舉結果，選舉項目包括：直轄市長、直轄市議員、縣市長、縣市議員及鄉鎮市長。點選「全台分布」可以看到各縣市當選人學歷分布情形；點選長條圖時，右方原餅圖為該縣市學歷分布；點選圓餅圖，左方長條圖則顯示該學歷在各縣市的當選人數加總。
	</p>
	<p class="ps">
		註：2010年，中華民國地方縣市升格為直轄市，出現更名與合併情形。台北縣改名為新北市，台中縣市資料合併至臺中市；台南縣市資料合併至台南市；高雄縣市資料合併至高雄市。
	</p>
    </div>
	<div class= "title_text">
        <p>近四屆學歷比例變化</p>
        </div>
	<!--
      <div style="text-align:center;"><img id="button-2" class="nav-img" src="./materiel/近四屆學歷比例變化.png"></div>
	-->
        <p class="article_content">
        左邊圖表以直轄、縣市首長及議員和鄉鎮市長為基礎，呈現近四屆中，各個學歷所占之比例。五張圖可分為兩種趨勢：一是以學士以上學歷為多數者，如：直轄市長、議員以及縣市長；二是以大學及高中職學歷居多者，如：縣市議員及鄉鎮市長。發現在越高的層級，高學歷者比重也越多。
        </p>
      
      <div id="block-2" class="block" style="padding-bottom:20px;">
	<p class="article_content">
		圖表呈現兩種趨勢：一是以大專院校及研究所以上學歷為多數者，如：直轄市長（百分之百）、直轄市議員及縣市長（各佔八成左右）當選人；二是以大專院校及高中職學歷居多者，如：縣市議員及鄉鎮市長（各佔八成左右）。層級愈高的選舉，高學歷當選人的比例也愈高。
	</p>
      <div style="float:left;display:inline-block;text-align:center">
        <h2 style="margin:0px;">直轄市長</h2>
        <svg class="svg-liyuan" id="svg1"></svg>
      </div>
      <div style="float:right;display:inline-block;text-align:center">
        <h2 style="margin:0px;">直轄市議員</h2>
        <svg class="svg-liyuan" id="svg2"></svg>
      </div>
      <div style="float:left;display:inline-block;text-align:center">
        <h2 style="margin:0px;">縣市長</h2>
        <svg class="svg-liyuan" id="svg3"></svg>
      </div>
      <div style="float:right;display:inline-block;text-align:center">
        <h2 style="margin:0px;">縣市議員</h2>
        <svg class="svg-liyuan" id="svg4"></svg>
      </div>      
      <div style="text-align:center;clear:both;">
        <h2 style="margin:0px;">鄉鎮市長</h2>
        <svg class="svg-liyuan" id="svg5"></svg>
      </div>        
      
	<p class="image_ps">
                圖 / 李宗岳 譚竹雯 廖昱涵
        </p>
   </div>
	<div class= "title_text">
        <p>當選學歷次數大比拚</p>
        </div>
	<p class="article_content">
        分析統計當選者學歷發現，層級較高之直轄市長、直轄市議員、縣市長中，都以研究所以上學歷的當選者占多數。而愈往基層選舉，才出現低學歷也可能勝
出的現象。
        </p>

	<!--
      <div style="text-align:center;"><img id="button-3" class="nav-img" src="./materiel/當選學歷次數大比拚.png"></div>
	-->
    <div id="block-3" class="block" style="text-align:center;padding-bottom:20px;">
      <img src="./materiel/大比拚圖表_改.png"style="width:600px;height:400px;" />
      <p class="image_ps">
                圖 / 李宗岳 譚竹雯 廖昱涵
        </p>
    </div>
   <div class= "title_text">
        <p>學歷影響當選比例</p>
        </div>
   <!--
    <div style="text-align:center"><img id="button-4" class="nav-img" src="./materiel/學歷影響當選比例.png"></div>
   -->
    <div id="block-4" class="block" style="padding-top:20px">
	 <p class="article_content">
                愈高教育程度者，在任何層級的當選比例都是最高。研究所以上學歷當選比例居冠，直轄市長選舉更是明顯。次高者為大專院校和高中職學歷，幾
乎平分秋色。高中職以下學歷者則最低。
        </p>
      <select id="selectpicker" class="selectpicker" style="float:left">
        <option value="graduate">研究所以上</option>
        <option value="undergrad">大專院校</option>
        <option value="highschool">高中職</option>
        <option value="underhigh">高中職以下</option>
      </select>
      <div id="blocl-4-image-div" style="text-align:center;">
      <img id="graduate" src="./materiel/研究所五個層級.png"style="width:100%"/ >
      <img id="undergrad" src="./materiel/大學五層級比例.png"style="width:100%;display:none"/>
      <img id="highschool" src="./materiel/高中五個層級.png"style="width:100%;display:none"/>
      <img id="underhigh" src="./materiel/其他五層級比例.png"style="width:100%;display:none"/>
      </div>
	<p class="image_ps">
                圖 / 李宗岳 譚竹雯 廖昱涵
        </p>
    </div>
  </div>
  
  
  


  
</body>
</html>
